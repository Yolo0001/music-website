@startuml 收藏评分流程

start

:用户浏览内容;
if (操作类型？) then (收藏)
  if (是否已收藏？) then (是)
    :取消收藏;
    :更新收藏状态;
  else (否)
    :添加收藏;
    :创建收藏记录;
  endif
  :更新UI显示;
else if (评分)
  :选择评分分数;
  if (是否已评分？) then (是)
    :更新评分记录;
  else (否)
    :创建评分记录;
  endif
  :计算平均分;
  :更新显示;
else if (评论)
  :输入评论内容;
  :提交评论;
  :保存到数据库;
  :刷新评论列表;
endif

stop

@enduml